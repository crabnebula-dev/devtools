syntax = "proto3";

package rs.devtools.tauri;

import "google/protobuf/timestamp.proto";

service Tauri {
  rpc GetConfig(ConfigRequest) returns (Config) {}

  rpc GetAsset(AssetRequest) returns (Asset) {}

  rpc GetMetrics(MetricsRequest) returns (Metrics) {}
}

message ConfigRequest {}

message AssetRequest {
  string path = 1;
}

message MetricsRequest {}

message Config {
  /// The raw JSON string of the configuration
  string raw = 1;
}

message Asset {
  /// The asset bytes.
  bytes bytes = 1;
  /// The asset's mime type.
  string mime_type = 2;
  /// The `Content-Security-Policy` header value.
  optional string csp_header = 3;
}

message Metrics {
  /// Tauri application initialization time
  google.protobuf.Timestamp initialized_at = 1;
  /// Tauri application reported `AppReady` time
  google.protobuf.Timestamp ready_at = 2;
}